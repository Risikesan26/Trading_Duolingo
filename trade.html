<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeQuest - Learn Trading the Fun Way</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', -apple-system, BlinkMacSystemFont, sans-serif;
            -webkit-font-smoothing: antialiased;
            background-color: #FFFFFF;
        }

        /* Duolingo Colors */
        :root {
            --duo-green: #58CC02;
            --duo-green-dark: #46A302;
            --duo-blue: #1CB0F6;
            --duo-blue-dark: #1899D6;
            --duo-red: #FF4B4B;
            --duo-yellow: #FFC800;
            --duo-orange: #FF9600;
            --duo-purple: #CE82FF;
            --duo-pink: #FF66C4;
            --duo-gray: #AFAFAF;
            --duo-gray-light: #F7F7F7;
            --duo-gray-dark: #4B4B4B;
        }

        /* Typography */
        .text-mega { font-size: 64px; font-weight: 900; line-height: 1.1; }
        .text-hero { font-size: 48px; font-weight: 800; line-height: 1.2; }
        .text-title { font-size: 32px; font-weight: 800; line-height: 1.3; }
        .text-heading { font-size: 24px; font-weight: 800; line-height: 1.3; }
        .text-subheading { font-size: 20px; font-weight: 700; line-height: 1.4; }
        .text-body { font-size: 17px; font-weight: 400; line-height: 1.5; }
        .text-small { font-size: 15px; font-weight: 700; line-height: 1.4; }
        .text-tiny { font-size: 13px; font-weight: 700; line-height: 1.3; }

        /* Buttons - Duolingo Style */
        .btn {
            border: none;
            border-radius: 16px;
            padding: 16px 24px;
            font-size: 17px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.1s ease;
            border-bottom: 4px solid transparent;
            text-align: center;
            display: inline-block;
        }

        .btn-primary {
            background: var(--duo-green);
            color: white;
            border-bottom-color: var(--duo-green-dark);
        }

        .btn-primary:hover {
            background: var(--duo-green-dark);
            transform: translateY(-2px);
        }

        .btn-primary:active {
            transform: translateY(0);
            border-bottom-width: 0;
        }

        .btn-secondary {
            background: var(--duo-blue);
            color: white;
            border-bottom-color: var(--duo-blue-dark);
        }

        .btn-danger {
            background: var(--duo-red);
            color: white;
            border-bottom-color: #E03838;
        }

        .btn-outline {
            background: white;
            color: var(--duo-gray-dark);
            border: 2px solid #E5E5E5;
            border-bottom-width: 4px;
        }

        .btn-outline:hover {
            background: #F7F7F7;
        }

        /* Cards */
        .card {
            background: white;
            border: 2px solid #E5E5E5;
            border-radius: 16px;
            border-bottom: 4px solid #E5E5E5;
            padding: 24px;
            transition: all 0.2s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            border-bottom-width: 6px;
        }

        .card-green {
            border-color: var(--duo-green);
            border-bottom-color: var(--duo-green-dark);
            background: linear-gradient(180deg, #58CC02 0%, #46A302 100%);
            color: white;
        }

        .card-blue {
            border-color: var(--duo-blue);
            border-bottom-color: var(--duo-blue-dark);
            background: linear-gradient(180deg, #1CB0F6 0%, #1899D6 100%);
            color: white;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 16px;
            background: #E5E5E5;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: var(--duo-green);
            border-radius: 12px;
            transition: width 0.3s ease;
        }

        /* Mascot Container */
        .mascot {
            width: 120px;
            height: 120px;
            background: linear-gradient(180deg, var(--duo-green) 0%, var(--duo-green-dark) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            border: 4px solid white;
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }

        /* Layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .screen {
            min-height: 100vh;
            padding: 40px 0;
        }

        /* Utility */
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .gap-8 { gap: 8px; }
        .gap-16 { gap: 16px; }
        .gap-24 { gap: 24px; }
        .gap-32 { gap: 32px; }
        .text-center { text-align: center; }
        .mb-8 { margin-bottom: 8px; }
        .mb-16 { margin-bottom: 16px; }
        .mb-24 { margin-bottom: 24px; }
        .mb-32 { margin-bottom: 32px; }
        .mb-48 { margin-bottom: 48px; }
        .mt-16 { margin-top: 16px; }
        .mt-24 { margin-top: 24px; }
        .mt-32 { margin-top: 32px; }
        .p-24 { padding: 24px; }
        .w-full { width: 100%; }
        .rounded { border-radius: 16px; }

        /* Grid */
        .grid {
            display: grid;
            gap: 16px;
        }

        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }

        @media (max-width: 768px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }

        /* Mission Card */
        .mission-card {
            background: white;
            border: 2px solid #E5E5E5;
            border-radius: 16px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .mission-card:hover {
            transform: translateY(-2px);
            border-color: var(--duo-green);
            box-shadow: 0 4px 12px rgba(88, 204, 2, 0.2);
        }

        .mission-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            flex-shrink: 0;
        }

        .mission-icon.green { background: linear-gradient(180deg, var(--duo-green) 0%, var(--duo-green-dark) 100%); }
        .mission-icon.blue { background: linear-gradient(180deg, var(--duo-blue) 0%, var(--duo-blue-dark) 100%); }
        .mission-icon.red { background: linear-gradient(180deg, var(--duo-red) 0%, #E03838 100%); }
        .mission-icon.yellow { background: linear-gradient(180deg, var(--duo-yellow) 0%, #E6B800 100%); }
        .mission-icon.purple { background: linear-gradient(180deg, var(--duo-purple) 0%, #B968E6 100%); }

        /* Streak Flame */
        .streak-container {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(180deg, #FF9600 0%, #FF6B00 100%);
            padding: 12px 20px;
            border-radius: 12px;
            color: white;
            font-weight: 800;
        }

        /* XP Badge */
        .xp-badge {
            background: var(--duo-yellow);
            color: var(--duo-gray-dark);
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 800;
        }

        /* Stat Card */
        .stat-card {
            background: white;
            border: 2px solid #E5E5E5;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 900;
            color: var(--duo-gray-dark);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 15px;
            font-weight: 700;
            color: var(--duo-gray);
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 2px solid #E5E5E5;
            padding: 16px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            font-size: 28px;
            font-weight: 900;
            color: var(--duo-green);
        }

        /* Assessment Option */
        .option-btn {
            width: 100%;
            background: white;
            border: 2px solid #E5E5E5;
            border-bottom: 4px solid #E5E5E5;
            border-radius: 16px;
            padding: 20px 24px;
            font-size: 17px;
            font-weight: 700;
            color: var(--duo-gray-dark);
            cursor: pointer;
            transition: all 0.1s ease;
            text-align: left;
        }

        .option-btn:hover {
            background: #F7F7F7;
            border-color: var(--duo-gray);
        }

        .option-btn:active {
            transform: translateY(2px);
            border-bottom-width: 2px;
        }

        /* Success Animation */
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .success-icon {
            animation: bounce 0.6s ease-in-out;
        }

        /* Skill Badge */
        .skill-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            background: white;
            border: 2px solid #E5E5E5;
            border-radius: 12px;
            padding: 16px;
        }

        .skill-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            background: linear-gradient(180deg, var(--duo-blue) 0%, var(--duo-blue-dark) 100%);
        }

        .skill-progress {
            flex: 1;
        }

        .skill-bar {
            width: 100%;
            height: 12px;
            background: #E5E5E5;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 8px;
        }

        .skill-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--duo-blue) 0%, var(--duo-blue-dark) 100%);
            border-radius: 8px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const TradingEducationGame = () => {
          const [currentScreen, setCurrentScreen] = useState('welcome');
          const [userProfile, setUserProfile] = useState({
            name: '',
            experience: '',
            markets: [],
            learningStyle: '',
            level: 1,
            xp: 0,
            streak: 0,
            skills: {
              riskManagement: 0,
              technicalAnalysis: 0,
              psychology: 0,
              strategy: 0
            }
          });
          const [assessmentStep, setAssessmentStep] = useState(0);
          const [simulationState, setSimulationState] = useState(null);
          const [missions, setMissions] = useState([]);
          const [activeMission, setActiveMission] = useState(null);
          const [tradeHistory, setTradeHistory] = useState([]);

          const demoTrades = [
            { id: 1, symbol: 'BTC/USD', type: 'LOSS', entry: 42000, exit: 41200, reason: 'Early exit', rr: 0.5, emotion: 'fear' },
            { id: 2, symbol: 'ETH/USD', type: 'WIN', entry: 2200, exit: 2350, reason: 'Good patience', rr: 2.5, emotion: 'disciplined' },
            { id: 3, symbol: 'BTC/USD', type: 'LOSS', entry: 43500, exit: 42800, reason: 'Moved stop loss', rr: 0.8, emotion: 'panic' },
            { id: 4, symbol: 'GOLD', type: 'LOSS', entry: 1850, exit: 1835, reason: 'FOMO entry', rr: 0.6, emotion: 'greed' }
          ];

          useEffect(() => {
            if (tradeHistory.length > 0 && missions.length === 0) {
              const generatedMissions = analyzeTrades(tradeHistory);
              setMissions(generatedMissions);
            }
          }, [tradeHistory, missions.length]);

          const analyzeTrades = (trades) => {
            const missions = [
              {
                id: 'replay-1',
                type: 'Replay Challenge',
                title: 'Master Your Patience',
                description: 'Replay your BTC trade and hold until target',
                trade: trades.find(t => t.reason === 'Early exit'),
                xp: 100,
                difficulty: 'Easy',
                icon: 'üéØ',
                color: 'green',
                completed: false
              },
              {
                id: 'drill-1',
                type: 'Mistake Drill',
                title: 'Stop Loss Discipline',
                description: 'Practice setting and respecting stop losses',
                xp: 150,
                difficulty: 'Medium',
                icon: 'üõ°Ô∏è',
                color: 'blue',
                completed: false
              },
              {
                id: 'boss-1',
                type: 'Boss Battle',
                title: 'False Breakout Gauntlet',
                description: 'Identify 5 real vs fake breakouts',
                xp: 300,
                difficulty: 'Hard',
                icon: 'üëë',
                color: 'red',
                locked: userProfile.level < 3
              }
            ];

            return missions;
          };

          const startAssessment = () => {
            setCurrentScreen('assessment');
            setAssessmentStep(0);
          };

          const handleAssessmentAnswer = (answer) => {
            setUserProfile(prev => ({ ...prev, ...answer }));
            
            if (assessmentStep < 2) {
              setAssessmentStep(assessmentStep + 1);
            } else {
              startSimulation();
            }
          };

          const startSimulation = () => {
            setCurrentScreen('simulation');
            setSimulationState({
              scenario: 'btc-breakout',
              price: 42000,
              phase: 'entry',
              decisions: [],
              chart: []
            });
          };

          const completeSimulation = (decisions) => {
            const skillScores = {
              riskManagement: 25,
              technicalAnalysis: 30,
              psychology: 20,
              strategy: 35
            };

            setUserProfile(prev => ({
              ...prev,
              skills: skillScores
            }));

            setTradeHistory(demoTrades);
            setCurrentScreen('dashboard');
          };

          const startMission = (mission) => {
            if (mission.locked) return;
            setActiveMission(mission);
            setCurrentScreen('mission');
          };

          const completeMission = (success) => {
            if (success) {
              setUserProfile(prev => ({
                ...prev,
                xp: prev.xp + activeMission.xp,
                level: Math.floor((prev.xp + activeMission.xp) / 500) + 1,
                streak: prev.streak + 1
              }));

              setMissions(prev => prev.map(m => 
                m.id === activeMission.id ? { ...m, completed: true } : m
              ));
            }
            setActiveMission(null);
            setCurrentScreen('dashboard');
          };

          const WelcomeScreen = () => (
            <div className="screen" style={{background: 'linear-gradient(180deg, #58CC02 0%, #46A302 100%)'}}>
              <div className="container" style={{paddingTop: '80px'}}>
                <div className="flex flex-col items-center text-center" style={{color: 'white'}}>
                  <div className="mascot mb-32" style={{width: '160px', height: '160px', fontSize: '96px', background: 'white'}}>
                    üìà
                  </div>
                  
                  <h1 className="text-mega mb-16">TradeQuest</h1>
                  <p className="text-heading mb-48" style={{maxWidth: '600px', opacity: 0.95}}>
                    The fun, effective way to master trading! Learn from your real trades.
                  </p>

                  <div className="card" style={{maxWidth: '800px', width: '100%', marginBottom: '32px'}}>
                    <div className="grid grid-3">
                      <div className="text-center p-24">
                        <div style={{fontSize: '56px', marginBottom: '16px'}}>üß†</div>
                        <h3 className="text-subheading mb-8" style={{color: 'var(--duo-gray-dark)'}}>AI Assessment</h3>
                        <p className="text-body" style={{color: 'var(--duo-gray)'}}>Quick skill check</p>
                      </div>
                      <div className="text-center p-24">
                        <div style={{fontSize: '56px', marginBottom: '16px'}}>üìä</div>
                        <h3 className="text-subheading mb-8" style={{color: 'var(--duo-gray-dark)'}}>Analyze Trades</h3>
                        <p className="text-body" style={{color: 'var(--duo-gray)'}}>Find your patterns</p>
                      </div>
                      <div className="text-center p-24">
                        <div style={{fontSize: '56px', marginBottom: '16px'}}>üéØ</div>
                        <h3 className="text-subheading mb-8" style={{color: 'var(--duo-gray-dark)'}}>Daily Missions</h3>
                        <p className="text-body" style={{color: 'var(--duo-gray)'}}>Level up skills</p>
                      </div>
                    </div>
                  </div>

                  <button className="btn btn-primary" style={{fontSize: '20px', padding: '20px 48px'}} onClick={startAssessment}>
                    GET STARTED
                  </button>
                </div>
              </div>
            </div>
          );

          const AssessmentScreen = () => {
            const questions = [
              {
                question: "What's your trading experience?",
                options: [
                  { label: 'Beginner (< 6 months)', value: 'beginner', emoji: 'üå±' },
                  { label: 'Intermediate (6-24 months)', value: 'intermediate', emoji: 'üìà' },
                  { label: 'Advanced (2+ years)', value: 'advanced', emoji: 'üöÄ' }
                ],
                field: 'experience'
              },
              {
                question: "Which markets do you trade?",
                options: [
                  { label: 'Crypto (BTC, ETH, etc)', value: 'crypto', emoji: '‚Çø' },
                  { label: 'Forex (EUR/USD, etc)', value: 'forex', emoji: 'üí±' },
                  { label: 'Stocks & Indices', value: 'stocks', emoji: 'üìä' },
                  { label: 'Commodities (Gold, Oil)', value: 'commodities', emoji: 'ü•á' }
                ],
                field: 'markets'
              },
              {
                question: "How do you learn best?",
                options: [
                  { label: 'Visual (charts & diagrams)', value: 'visual', emoji: 'üìà' },
                  { label: 'Analytical (data & numbers)', value: 'analytical', emoji: 'üî¢' },
                  { label: 'Step-by-step instructions', value: 'stepByStep', emoji: 'üìù' }
                ],
                field: 'learningStyle'
              }
            ];

            const currentQuestion = questions[assessmentStep];
            const progress = ((assessmentStep + 1) / 3) * 100;

            return (
              <div className="screen" style={{background: '#F7F7F7'}}>
                <div className="container" style={{maxWidth: '800px', paddingTop: '40px'}}>
                  <div className="mb-32">
                    <div className="flex justify-between items-center mb-16">
                      <span className="text-small" style={{color: 'var(--duo-gray)'}}>
                        Question {assessmentStep + 1} of 3
                      </span>
                      <span className="text-small" style={{color: 'var(--duo-gray)'}}>
                        {Math.round(progress)}%
                      </span>
                    </div>
                    <div className="progress-bar">
                      <div className="progress-fill" style={{width: `${progress}%`}} />
                    </div>
                  </div>

                  <h2 className="text-title mb-32" style={{color: 'var(--duo-gray-dark)'}}>
                    {currentQuestion.question}
                  </h2>

                  <div className="flex flex-col gap-16">
                    {currentQuestion.options.map((option) => (
                      <button
                        key={option.value}
                        onClick={() => handleAssessmentAnswer({ [currentQuestion.field]: option.value })}
                        className="option-btn"
                      >
                        <span style={{fontSize: '24px', marginRight: '12px'}}>{option.emoji}</span>
                        {option.label}
                      </button>
                    ))}
                  </div>
                </div>
              </div>
            );
          };

          const SimulationScreen = () => {
            const [position, setPosition] = useState(null);
            const [stopLoss, setStopLoss] = useState(null);
            const [takeProfit, setTakeProfit] = useState(null);

            return (
              <div className="screen" style={{background: '#F7F7F7'}}>
                <div className="container" style={{maxWidth: '900px'}}>
                  <div className="card mb-24">
                    <h2 className="text-title mb-24" style={{color: 'var(--duo-gray-dark)'}}>
                      Trading Simulation: BTC Breakout
                    </h2>

                    <div className="grid grid-3 gap-16 mb-32">
                      <div className="stat-card">
                        <div className="stat-value">$42,000</div>
                        <div className="stat-label">Current Price</div>
                      </div>
                      <div className="stat-card">
                        <div className="stat-value">{position ? `$${position.entry.toLocaleString()}` : '‚Äî'}</div>
                        <div className="stat-label">Entry</div>
                      </div>
                      <div className="stat-card">
                        <div className="stat-value">{stopLoss ? `$${stopLoss.toLocaleString()}` : '‚Äî'}</div>
                        <div className="stat-label">Stop Loss</div>
                      </div>
                    </div>

                    <div className="mb-32" style={{background: '#F7F7F7', borderRadius: '16px', padding: '48px', textAlign: 'center'}}>
                      <div style={{fontSize: '80px', marginBottom: '16px'}}>üìä</div>
                      <p className="text-heading" style={{color: 'var(--duo-gray-dark)'}}>
                        BTC is at a key resistance
                      </p>
                      <p className="text-body" style={{color: 'var(--duo-gray)'}}>
                        What's your trading plan?
                      </p>
                    </div>

                    <div className="flex flex-col gap-16">
                      {!position && (
                        <button
                          onClick={() => setPosition({ entry: 42000, type: 'LONG' })}
                          className="btn btn-primary w-full"
                        >
                          ENTER LONG POSITION
                        </button>
                      )}

                      {position && !stopLoss && (
                        <button
                          onClick={() => setStopLoss(41500)}
                          className="btn btn-danger w-full"
                        >
                          SET STOP LOSS (-$500)
                        </button>
                      )}

                      {position && stopLoss && !takeProfit && (
                        <button
                          onClick={() => setTakeProfit(43000)}
                          className="btn btn-secondary w-full"
                        >
                          SET TAKE PROFIT (+$1000)
                        </button>
                      )}

                      {position && stopLoss && takeProfit && (
                        <button
                          onClick={() => completeSimulation([])}
                          className="btn btn-primary w-full"
                        >
                          COMPLETE SIMULATION
                        </button>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            );
          };

          const DashboardScreen = () => {
            const xpProgress = (userProfile.xp % 500) / 500 * 100;

            return (
              <div className="screen" style={{background: '#F7F7F7'}}>
                <div className="header">
                  <div className="container flex justify-between items-center">
                    <div className="logo">TradeQuest</div>
                    <div className="flex items-center gap-16">
                      <div className="streak-container">
                        <span style={{fontSize: '24px'}}>üî•</span>
                        <span className="text-subheading">{userProfile.streak}</span>
                      </div>
                    </div>
                  </div>
                </div>

                <div className="container" style={{paddingTop: '32px'}}>
                  <div className="card mb-24" style={{background: 'linear-gradient(180deg, #1CB0F6 0%, #1899D6 100%)', color: 'white', border: 'none'}}>
                    <div className="flex justify-between items-center mb-16">
                      <div>
                        <h1 className="text-title mb-8">Level {userProfile.level}</h1>
                        <p className="text-body" style={{opacity: 0.9}}>{userProfile.xp} / {userProfile.level * 500} XP</p>
                      </div>
                      <div style={{fontSize: '64px'}}>‚≠ê</div>
                    </div>
                    <div className="progress-bar" style={{background: 'rgba(255,255,255,0.3)'}}>
                      <div className="progress-fill" style={{background: 'white', width: `${xpProgress}%`}} />
                    </div>
                  </div>

                  <h2 className="text-heading mb-24" style={{color: 'var(--duo-gray-dark)'}}>Today's Missions</h2>

                  <div className="flex flex-col gap-16 mb-32">
                    {missions.map((mission) => (
                      <div 
                        key={mission.id}
                        className="mission-card"
                        onClick={() => startMission(mission)}
                        style={{opacity: mission.locked ? 0.5 : 1, cursor: mission.locked ? 'not-allowed' : 'pointer'}}
                      >
                        <div className={`mission-icon ${mission.color}`}>
                          {mission.locked ? 'üîí' : mission.icon}
                        </div>
                        <div style={{flex: 1}}>
                          <div className="flex items-center gap-8 mb-8">
                            <span className="text-tiny" style={{
                              background: mission.color === 'red' ? 'var(--duo-red)' : 
                                         mission.color === 'blue' ? 'var(--duo-blue)' : 'var(--duo-green)',
                              color: 'white',
                              padding: '4px 12px',
                              borderRadius: '8px'
                            }}>
                              {mission.type}
                            </span>
                            <span className="text-tiny" style={{color: 'var(--duo-gray)'}}>
                              {mission.difficulty}
                            </span>
                          </div>
                          <h3 className="text-subheading mb-8" style={{color: 'var(--duo-gray-dark)'}}>
                            {mission.title}
                          </h3>
                          <p className="text-body" style={{color: 'var(--duo-gray)'}}>
                            {mission.description}
                          </p>
                        </div>
                        <div className="xp-badge">+{mission.xp} XP</div>
                      </div>
                    ))}
                  </div>

                  <h2 className="text-heading mb-24" style={{color: 'var(--duo-gray-dark)'}}>Your Skills</h2>

                  <div className="flex flex-col gap-16">
                    {Object.entries(userProfile.skills).map(([skill, value]) => {
                      const labels = {
                        riskManagement: 'Risk Management',
                        technicalAnalysis: 'Technical Analysis',
                        psychology: 'Psychology',
                        strategy: 'Strategy'
                      };
                      const emojis = {
                        riskManagement: 'üõ°Ô∏è',
                        technicalAnalysis: 'üìä',
                        psychology: 'üß†',
                        strategy: 'üéØ'
                      };

                      return (
                        <div key={skill} className="skill-badge">
                          <div className="skill-icon">{emojis[skill]}</div>
                          <div className="skill-progress">
                            <div className="flex justify-between items-center mb-8">
                              <span className="text-small" style={{color: 'var(--duo-gray-dark)'}}>
                                {labels[skill]}
                              </span>
                              <span className="text-small" style={{color: 'var(--duo-gray)'}}>
                                {value}/100
                              </span>
                            </div>
                            <div className="skill-bar">
                              <div className="skill-bar-fill" style={{width: `${value}%`}} />
                            </div>
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </div>
              </div>
            );
          };

          const MissionScreen = () => {
            const [missionPhase, setMissionPhase] = useState('briefing');

            if (missionPhase === 'briefing') {
              return (
                <div className="screen" style={{background: '#F7F7F7'}}>
                  <div className="container" style={{maxWidth: '800px'}}>
                    <div className="card mb-24" style={{textAlign: 'center'}}>
                      <div style={{fontSize: '96px', marginBottom: '24px'}}>{activeMission.icon}</div>
                      <h1 className="text-title mb-16" style={{color: 'var(--duo-gray-dark)'}}>
                        {activeMission.title}
                      </h1>
                      <p className="text-heading" style={{color: 'var(--duo-gray)', marginBottom: '32px'}}>
                        {activeMission.description}
                      </p>
                      <div className="xp-badge" style={{fontSize: '17px', padding: '8px 20px'}}>
                        +{activeMission.xp} XP
                      </div>
                    </div>

                    {activeMission.trade && (
                      <div className="card mb-24" style={{
                        borderColor: 'var(--duo-red)',
                        borderBottomColor: '#E03838'
                      }}>
                        <h3 className="text-subheading mb-24" style={{color: 'var(--duo-gray-dark)'}}>
                          Your Original Trade
                        </h3>
                        <div className="grid grid-2 gap-16">
                          <div>
                            <div className="text-small" style={{color: 'var(--duo-gray)', marginBottom: '8px'}}>Symbol</div>
                            <div className="text-heading" style={{color: 'var(--duo-gray-dark)'}}>{activeMission.trade.symbol}</div>
                          </div>
                          <div>
                            <div className="text-small" style={{color: 'var(--duo-gray)', marginBottom: '8px'}}>Result</div>
                            <div className="text-heading" style={{color: 'var(--duo-red)'}}>LOSS</div>
                          </div>
                          <div>
                            <div className="text-small" style={{color: 'var(--duo-gray)', marginBottom: '8px'}}>Entry</div>
                            <div className="text-heading" style={{color: 'var(--duo-gray-dark)'}}>${activeMission.trade.entry.toLocaleString()}</div>
                          </div>
                          <div>
                            <div className="text-small" style={{color: 'var(--duo-gray)', marginBottom: '8px'}}>Exit</div>
                            <div className="text-heading" style={{color: 'var(--duo-gray-dark)'}}>${activeMission.trade.exit.toLocaleString()}</div>
                          </div>
                        </div>
                        <div style={{marginTop: '24px', padding: '16px', background: '#FFF4F4', borderRadius: '12px'}}>
                          <div className="text-small" style={{color: 'var(--duo-red)', marginBottom: '8px'}}>What went wrong</div>
                          <div className="text-body" style={{color: 'var(--duo-gray-dark)', fontWeight: 700}}>
                            {activeMission.trade.reason}
                          </div>
                        </div>
                      </div>
                    )}

                    <button
                      onClick={() => setMissionPhase('success')}
                      className="btn btn-primary w-full"
                      style={{fontSize: '20px', padding: '20px'}}
                    >
                      START MISSION
                    </button>
                  </div>
                </div>
              );
            }

            if (missionPhase === 'success') {
              return (
                <div className="screen" style={{background: 'linear-gradient(180deg, #58CC02 0%, #46A302 100%)'}}>
                  <div className="container" style={{maxWidth: '700px', paddingTop: '80px'}}>
                    <div className="text-center" style={{color: 'white'}}>
                      <div className="success-icon" style={{fontSize: '120px', marginBottom: '32px'}}>üèÜ</div>
                      <h1 className="text-mega mb-16">Awesome!</h1>
                      <p className="text-heading mb-48" style={{opacity: 0.95}}>
                        You completed the mission!
                      </p>

                      <div className="grid grid-3 gap-16 mb-48">
                        <div className="card" style={{border: 'none', background: 'rgba(255,255,255,0.2)'}}>
                          <div style={{fontSize: '48px', marginBottom: '16px'}}>‚≠ê</div>
                          <div className="text-title" style={{color: 'white'}}>+{activeMission.xp}</div>
                          <div className="text-body" style={{color: 'white', opacity: 0.9}}>XP</div>
                        </div>
                        <div className="card" style={{border: 'none', background: 'rgba(255,255,255,0.2)'}}>
                          <div style={{fontSize: '48px', marginBottom: '16px'}}>üß†</div>
                          <div className="text-title" style={{color: 'white'}}>+15</div>
                          <div className="text-body" style={{color: 'white', opacity: 0.9}}>Psychology</div>
                        </div>
                        <div className="card" style={{border: 'none', background: 'rgba(255,255,255,0.2)'}}>
                          <div style={{fontSize: '48px', marginBottom: '16px'}}>üéØ</div>
                          <div className="text-title" style={{color: 'white'}}>+10</div>
                          <div className="text-body" style={{color: 'white', opacity: 0.9}}>Strategy</div>
                        </div>
                      </div>

                      <div className="card mb-32" style={{textAlign: 'left'}}>
                        <h3 className="text-subheading mb-16" style={{color: 'var(--duo-gray-dark)'}}>
                          üéì What You Learned
                        </h3>
                        <p className="text-body" style={{color: 'var(--duo-gray)'}}>
                          By holding to your target, you maximized your risk:reward ratio. Early exits prevent traders from being profitable long-term. Trust your analysis and let winners run!
                        </p>
                      </div>

                      <button
                        onClick={() => completeMission(true)}
                        className="btn w-full"
                        style={{
                          background: 'white',
                          color: 'var(--duo-green)',
                          fontSize: '20px',
                          padding: '20px',
                          borderBottomColor: '#E5E5E5'
                        }}
                      >
                        CONTINUE
                      </button>
                    </div>
                  </div>
                </div>
              );
            }
          };

          return (
            <div>
              {currentScreen === 'welcome' && <WelcomeScreen />}
              {currentScreen === 'assessment' && <AssessmentScreen />}
              {currentScreen === 'simulation' && <SimulationScreen />}
              {currentScreen === 'dashboard' && <DashboardScreen />}
              {currentScreen === 'mission' && <MissionScreen />}
            </div>
          );
        };

        ReactDOM.render(<TradingEducationGame />, document.getElementById('root'));
    </script>
</body>
</html>
